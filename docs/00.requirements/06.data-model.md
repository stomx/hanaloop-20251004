# 데이터 모델

## 개요

이 문서는 탄소 배출 대시보드에서 사용되는 데이터 모델을 정의합니다.

## 타입 정의

### Country (국가)

```typescript
type Country = {
  code: string;      // ISO 2-letter code (e.g., "US", "DE", "KR")
  name: string;      // 국가명 (e.g., "United States", "Germany", "South Korea")
};
```

**용도**: 회사의 소재지를 나타내며, 국가별 필터링 및 그룹화에 사용됩니다.

### Company (회사)

```typescript
type Company = {
  id: string;              // 고유 식별자
  name: string;            // 회사명
  country: string;         // Country.code 참조
  emissions: GhgEmission[]; // 월별 배출량 데이터 배열
};
```

**용도**: 각 회사의 기본 정보와 배출량 이력을 저장합니다.

### GhgEmission (온실가스 배출량)

```typescript
type GhgEmission = {
  yearMonth: string;  // "YYYY-MM" 형식 (e.g., "2024-01", "2025-03")
  source: string;     // 배출원 (e.g., "gasoline", "lpg", "diesel", "natural gas")
  emissions: number;  // CO2 환산 톤 (tons of CO2 equivalent)
};
```

**용도**: 특정 월의 배출량 데이터를 기록합니다. 배출원별로 분류되어 상세 분석이 가능합니다.

### Post (포스트)

```typescript
type Post = {
  id: string;          // 고유 식별자
  title: string;       // 포스트 제목
  resourceUid: string; // Company.id 참조
  dateTime: string;    // "YYYY-MM" 형식 (e.g., "2024-02")
  content: string;     // 포스트 내용
};
```

**용도**: 특정 회사와 월에 연결된 보고서, 메모, 업데이트 등을 저장합니다.

## 시드 데이터 예시

### Countries

```typescript
export const countries: Country[] = [
  { code: "US", name: "United States" },
  { code: "DE", name: "Germany" },
  { code: "KR", name: "South Korea" },
  { code: "JP", name: "Japan" },
  { code: "CN", name: "China" },
];
```

### Companies

```typescript
export const companies: Company[] = [
  {
    id: "c1",
    name: "Acme Corp",
    country: "US",
    emissions: [
      { yearMonth: "2024-01", source: "gasoline", emissions: 120 },
      { yearMonth: "2024-02", source: "gasoline", emissions: 110 },
      { yearMonth: "2024-03", source: "gasoline", emissions: 95 },
      { yearMonth: "2024-01", source: "diesel", emissions: 50 },
      { yearMonth: "2024-02", source: "diesel", emissions: 55 },
      { yearMonth: "2024-03", source: "diesel", emissions: 48 },
    ]
  },
  {
    id: "c2",
    name: "Globex",
    country: "DE",
    emissions: [
      { yearMonth: "2024-01", source: "lpg", emissions: 80 },
      { yearMonth: "2024-02", source: "lpg", emissions: 105 },
      { yearMonth: "2024-03", source: "lpg", emissions: 120 },
      { yearMonth: "2024-01", source: "natural gas", emissions: 30 },
      { yearMonth: "2024-02", source: "natural gas", emissions: 35 },
      { yearMonth: "2024-03", source: "natural gas", emissions: 32 },
    ]
  },
  {
    id: "c3",
    name: "Initech",
    country: "KR",
    emissions: [
      { yearMonth: "2024-01", source: "gasoline", emissions: 60 },
      { yearMonth: "2024-02", source: "gasoline", emissions: 65 },
      { yearMonth: "2024-03", source: "gasoline", emissions: 70 },
    ]
  },
];
```

### Posts

```typescript
export const posts: Post[] = [
  {
    id: "p1",
    title: "Sustainability Report Q1",
    resourceUid: "c1",
    dateTime: "2024-02",
    content: "Quarterly CO2 update: emissions decreased by 8% compared to January."
  },
  {
    id: "p2",
    title: "New Green Initiative",
    resourceUid: "c2",
    dateTime: "2024-03",
    content: "Implementing new solar panels to reduce natural gas dependency."
  },
  {
    id: "p3",
    title: "Fleet Optimization",
    resourceUid: "c3",
    dateTime: "2024-03",
    content: "Transitioning company vehicles to hybrid models."
  },
];
```

## 데이터 관계

```
Country
  └── Company (1:N)
        ├── GhgEmission[] (1:N)
        └── Post[] (1:N via resourceUid)
```

## 집계 예시

### 회사별 월별 총 배출량

```typescript
function getTotalEmissionsByMonth(company: Company): Record<string, number> {
  return company.emissions.reduce((acc, emission) => {
    acc[emission.yearMonth] = (acc[emission.yearMonth] || 0) + emission.emissions;
    return acc;
  }, {} as Record<string, number>);
}
```

### 배출원별 총량

```typescript
function getEmissionsBySource(company: Company): Record<string, number> {
  return company.emissions.reduce((acc, emission) => {
    acc[emission.source] = (acc[emission.source] || 0) + emission.emissions;
    return acc;
  }, {} as Record<string, number>);
}
```

## 확장 가능성

향후 추가될 수 있는 데이터 필드:

- Company에 `industry` (산업 분류)
- GhgEmission에 `scope` (Scope 1, 2, 3)
- Post에 `author`, `tags`, `attachments`
- Carbon tax rate per country
- Reduction targets and goals
